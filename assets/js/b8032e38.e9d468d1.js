"use strict";(self.webpackChunk_0_l_documentation=self.webpackChunk_0_l_documentation||[]).push([[7361],{4292:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>a,toc:()=>d});var i=s(5893),r=s(1151);const t={sidebar_position:6,sidebar_label:"Genesis",description:"Launch the 0L Network"},o="0L Genesis Ceremony Guide",a={id:"validators/genesis",title:"0L Genesis Ceremony Guide",description:"Launch the 0L Network",source:"@site/docs/validators/genesis.md",sourceDirName:"validators",slug:"/validators/genesis",permalink:"/validators/genesis",draft:!1,unlisted:!1,editUrl:"https://github.com/0LNetworkCommunity/documentation/edit/main/docs/validators/genesis.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6,sidebar_label:"Genesis",description:"Launch the 0L Network"},sidebar:"tutorialSidebar",previous:{title:"Register",permalink:"/validators/register"},next:{title:"VFN",permalink:"/validators/vfn-setup"}},l={},d=[{value:"High Level Ceremony Steps",id:"high-level-ceremony-steps",level:3},{value:"Genesis Ceremony Steps",id:"genesis-ceremony-steps",level:2},{value:"1. Cleanup",id:"1-cleanup",level:3},{value:"2. Prepare <code>.libra</code> directory and add GitHub PAT (use classic with repo privileges)",id:"2-prepare-libra-directory-and-add-github-pat-use-classic-with-repo-privileges",level:3},{value:"3. Fetch source &amp; verify commit hash",id:"3-fetch-source--verify-commit-hash",level:3},{value:"4. Export coordination repo as environment variables and override defaults if needed",id:"4-export-coordination-repo-as-environment-variables-and-override-defaults-if-needed",level:3},{value:"4. Change directory to the genesis tool",id:"4-change-directory-to-the-genesis-tool",level:3},{value:"5. Install the source",id:"5-install-the-source",level:3},{value:"6. Pre-Genesis Registration",id:"6-pre-genesis-registration",level:3},{value:"6. PR Received",id:"6-pr-received",level:3},{value:"7. PR Merged",id:"7-pr-merged",level:3},{value:"8. Build JSON_Legacy from snapshot and ancestry",id:"8-build-json_legacy-from-snapshot-and-ancestry",level:3},{value:"9. All nodes added to <code>layout.yaml</code> users key",id:"9-all-nodes-added-to-layoutyaml-users-key",level:3},{value:"10. Make Genesis",id:"10-make-genesis",level:3},{value:"11. Start nodes!",id:"11-start-nodes",level:3}];function c(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",hr:"hr",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"0l-genesis-ceremony-guide",children:"0L Genesis Ceremony Guide"}),"\n",(0,i.jsx)(n.p,{children:"This guide outlines the essential steps for conducting a Genesis Ceremony in the 0L Network. The Genesis Ceremony is a pivotal event marking the creation of the network's genesis blob \u2014 the foundational block that underpins the entire blockchain. It's a crucial process that not only initiates the network but also involves transitioning or migrating the network's state from an earlier version (in this case, from v5 to v6.9.0). This ensures continuity and preserves the integrity of the network through upgrades or hard forks. Follow this document to navigate the process effectively, ensuring a smooth and successful launch or upgrade of the 0L Network."}),"\n",(0,i.jsx)(n.h3,{id:"high-level-ceremony-steps",children:"High Level Ceremony Steps"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Cleanup"}),"\n",(0,i.jsxs)(n.li,{children:["Prepare ",(0,i.jsx)(n.code,{children:".libra"})," Directory and Add GitHub PAT"]}),"\n",(0,i.jsx)(n.li,{children:"Fetch Source & Verify Commit Hash"}),"\n",(0,i.jsxs)(n.li,{children:["Build ",(0,i.jsx)(n.code,{children:"libra-framework"})," Packages"]}),"\n",(0,i.jsxs)(n.li,{children:["Pre-Genesis Registration","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Stop"}),": Wait for coordinator to merge all PR's. Step 8 can be done while you wait"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"PR Received"}),"\n",(0,i.jsx)(n.li,{children:"PR Merged"}),"\n",(0,i.jsx)(n.li,{children:"Build JSON_Legacy"}),"\n",(0,i.jsxs)(n.li,{children:["All Nodes Added to ",(0,i.jsx)(n.code,{children:"layout.yaml"})," Users Key","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Wait for Coordinator"}),": Wait for coordinator post-pre-genesis set closure and to add all genesis participants."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Pull from Genesis Repo and Build","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Wait for Coordinator"}),": Wait for coordinator's signal to start."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Start Nodes!"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:"Each step requires careful attention to the coordinator's instructions, ensuring a smooth and successful Genesis Ceremony for the 0L Network. Coordination happens via 0L Discord and a sheet will track participants."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Coordinator"}),": ",(0,i.jsx)(n.code,{children:"sirouk"})]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["\u26a0\ufe0f ",(0,i.jsx)(n.strong,{children:"Important"}),": Only proceed with asynchronous steps after the coordinator confirms the previous sequential blocking steps as completed."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"genesis-ceremony-steps",children:"Genesis Ceremony Steps"}),"\n",(0,i.jsx)(n.h3,{id:"1-cleanup",children:"1. Cleanup"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Delete any previous forks of testnet genesis coordination repo (such as ",(0,i.jsx)(n.code,{children:"release-v6.9.0-rc.0-genesis-2"}),") from your GitHub repositories."]}),"\n",(0,i.jsxs)(n.li,{children:["Previous clones and testnets leave data in the ",(0,i.jsx)(n.code,{children:".libra"})," directory, clean those up:","\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"rm -Rf ~/libra-framework\nrm -Rf ~/.libra/data && rm -Rf ~/.libra/genesis && rm -Rf ~/.libra/secure-data.json\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"(Optional) If you already know with which account you'll register, or registered in the past for a testnet with the same account, you can already update the coordination sheet with your information. Otherwise, you'll do it once you generated your new account keys in step (6) below."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Retrieve Validator Address and paste it aside:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"grep 'account_address' ~/.libra/public-keys.yaml\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Fetch your external Static IP and set it aside"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"curl -s ipinfo.io | jq .ip\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Enter your Validator Address, Operator Name, and Static IP in the ",(0,i.jsx)(n.a,{href:"https://docs.google.com/spreadsheets/d/17mF8Trg4xkUEkpJH9yTjVWRWx6ugYBRTMcuXscafhlI/edit?pli=1#gid=2041290571",children:"Genesis Worksheet"}),"."]}),"\n",(0,i.jsxs)(n.h3,{id:"2-prepare-libra-directory-and-add-github-pat-use-classic-with-repo-privileges",children:["2. Prepare ",(0,i.jsx)(n.code,{children:".libra"})," directory and add GitHub PAT (use classic with repo privileges)"]}),"\n",(0,i.jsxs)(n.p,{children:["Acquire ",(0,i.jsx)(n.a,{href:"https://github.com/settings/tokens",children:"GitHub Personal Access Token (PAT)"})," with repo privileges. Paste it aside."]}),"\n",(0,i.jsx)(n.p,{children:"Setup the data and configs directory:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"mkdir ~/.libra/\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Paste your GitHub PAT in the ",(0,i.jsx)(n.code,{children:"~/.libra/github_token.txt"})," file:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"nano ~/.libra/github_token.txt\n# or\necho <KEY> > ~/.libra/github_token.txt\n"})}),"\n",(0,i.jsx)(n.h3,{id:"3-fetch-source--verify-commit-hash",children:"3. Fetch source & verify commit hash"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'cd ~\ngit clone https://github.com/0LNetworkCommunity/libra-framework\ncd ~/libra-framework\ngit fetch --all && git checkout main (or a specific branch as instructed by the coordinator)\n\n# Ensure the commit hash matches your peers and the coordinator\ngit log -n 1 --pretty=format:"%H"\n'})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": Provide git hash in the ",(0,i.jsx)(n.a,{href:"https://docs.google.com/spreadsheets/d/17mF8Trg4xkUEkpJH9yTjVWRWx6ugYBRTMcuXscafhlI/edit?pli=1#gid=2041290571",children:"Genesis Worksheet"}),". Only proceed with the following async steps after the coordinator provides the git hash and your results match your peers."]}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:'Confirm with "done" in the Genesis Worksheet.'}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"4-export-coordination-repo-as-environment-variables-and-override-defaults-if-needed",children:"4. Export coordination repo as environment variables and override defaults if needed"}),"\n",(0,i.jsxs)(n.p,{children:["If your setup from directory structure is different from the default, you can override the defaults by exporting the following environment variables:\n",(0,i.jsx)(n.code,{children:"SOURCE_PATH"}),", ",(0,i.jsx)(n.code,{children:"BINS_PATH"}),", ",(0,i.jsx)(n.code,{children:"DATA_PATH"}),". See the ",(0,i.jsx)(n.a,{href:"https://github.com/0LNetworkCommunity/libra-framework/blob/03d9f10bb539bda4c3f9de96e4a411971ec88d80/tools/genesis/Makefile#L7",children:"Makefile"})," for more details."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"export GIT_REPO=release-v6.9.0-genesis-registration\n# export SOURCE_PATH=... as needed\n"})}),"\n",(0,i.jsx)(n.h3,{id:"4-change-directory-to-the-genesis-tool",children:"4. Change directory to the genesis tool"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd ~/libra-framework/tools/genesis\n"})}),"\n",(0,i.jsx)(n.h3,{id:"5-install-the-source",children:"5. Install the source"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"make install\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:'Confirm with "done" in the Genesis Worksheet.'}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"6-pre-genesis-registration",children:"6. Pre-Genesis Registration"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"make register\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:'Confirm with "done" in the Genesis Worksheet.'}),"\n"]}),"\n",(0,i.jsxs)(n.admonition,{type:"warning",children:[(0,i.jsx)(n.mdxAdmonitionTitle,{}),(0,i.jsx)(n.p,{children:"Wait for coordinator"})]}),"\n",(0,i.jsx)(n.h3,{id:"6-pr-received",children:"6. PR Received"}),"\n",(0,i.jsx)(n.p,{children:"(coordinator)"}),"\n",(0,i.jsx)(n.h3,{id:"7-pr-merged",children:"7. PR Merged"}),"\n",(0,i.jsx)(n.p,{children:"(coordinator)"}),"\n",(0,i.jsx)(n.h3,{id:"8-build-json_legacy-from-snapshot-and-ancestry",children:"8. Build JSON_Legacy from snapshot and ancestry"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Export the epoch from which legacy is built\nexport EPOCH=694\n\n# Build the legacy json\nmake legacy\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Confirm ",(0,i.jsx)(n.code,{children:"v5_recovery.json"})," md5 hash in the Genesis Worksheet."]}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"9-all-nodes-added-to-layoutyaml-users-key",children:["9. All nodes added to ",(0,i.jsx)(n.code,{children:"layout.yaml"})," users key"]}),"\n",(0,i.jsx)(n.p,{children:"(coordinator)"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["\u26a0\ufe0f ",(0,i.jsx)(n.strong,{children:"Note"}),": Pre-genesis set closes here. Wait for coordinator."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"10-make-genesis",children:"10. Make Genesis"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"make genesis\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:'Confirm with "done" in the Genesis Worksheet.'}),"\n"]}),"\n",(0,i.jsxs)(n.admonition,{type:"warning",children:[(0,i.jsx)(n.mdxAdmonitionTitle,{}),(0,i.jsx)(n.p,{children:"Wait for coordinator"})]}),"\n",(0,i.jsx)(n.h3,{id:"11-start-nodes",children:"11. Start nodes!"}),"\n",(0,i.jsx)(n.p,{children:"Wait for the coordinator, say a prayer, then start!"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"libra node\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"End of Ceremony Steps"})})]})}function h(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},1151:(e,n,s)=>{s.d(n,{Z:()=>a,a:()=>o});var i=s(7294);const r={},t=i.createContext(r);function o(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);